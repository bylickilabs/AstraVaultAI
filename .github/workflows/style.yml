name: üé® AstraVault AI ‚Äì Code Style Enforcement

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  style:
    name: üß± Lint & Format Validation
    runs-on: ubuntu-latest

    steps:
      # ---------------------------------------------------------
      # 1Ô∏è‚É£ Checkout Repository
      # ---------------------------------------------------------
      - name: üß± Checkout Repository
        uses: actions/checkout@v4

      # ---------------------------------------------------------
      # 2Ô∏è‚É£ Set up Python
      # ---------------------------------------------------------
      - name: ‚öôÔ∏è Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      # ---------------------------------------------------------
      # 3Ô∏è‚É£ Install formatting & linting tools
      # ---------------------------------------------------------
      - name: üß© Install Style Tools
        run: |
          python -m pip install --upgrade pip
          pip install black flake8 isort

      # ---------------------------------------------------------
      # 4Ô∏è‚É£ Check Python Code Formatting (Black)
      # ---------------------------------------------------------
      - name: üé® Check Code Style (Black)
        run: |
          echo ">>> Running black formatting check..."
          black --check . || echo "‚ö†Ô∏è Code formatting issues detected."

      # ---------------------------------------------------------
      # 5Ô∏è‚É£ Lint Code (Flake8)
      # ---------------------------------------------------------
      - name: üîç Run Flake8 Linter
        run: |
          echo ">>> Running Flake8..."
          flake8 . --count --max-line-length=127 --statistics || echo "‚ö†Ô∏è Lint warnings detected."

      # ---------------------------------------------------------
      # 6Ô∏è‚É£ Import Sort Check (isort)
      # ---------------------------------------------------------
      - name: üß† Validate Import Sorting
        run: |
          echo ">>> Checking import order..."
          isort --check-only . || echo "‚ö†Ô∏è Import sorting issues detected."

      # ---------------------------------------------------------
      # 7Ô∏è‚É£ Summary Output
      # ---------------------------------------------------------
      - name: ‚úÖ Style Check Completed
        run: |
          echo "============================================================"
          echo "‚úÖ AstraVault AI ‚Äì Code Style Enforcement Completed"
          echo "üîí BYLICKILABS ‚Äì Intelligence Systems & Communications"
          echo "============================================================"
