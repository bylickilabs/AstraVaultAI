name: üöÄ AstraVault AI ‚Äì Application Release

on:
  push:
    tags:
      - 'v*.*.*'
  workflow_dispatch:

permissions:
  contents: write

jobs:
  release:
    name: üß© Build & Publish ZIP Release
    runs-on: ubuntu-latest

    steps:
      # ---------------------------------------------------------
      # 1Ô∏è‚É£ Checkout Repository
      # ---------------------------------------------------------
      - name: üß± Checkout Repository
        uses: actions/checkout@v4

      # ---------------------------------------------------------
      # 2Ô∏è‚É£ Set up Python Environment (for metadata or version extraction)
      # ---------------------------------------------------------
      - name: ‚öôÔ∏è Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      # ---------------------------------------------------------
      # 3Ô∏è‚É£ Create Release ZIP Archive
      # ---------------------------------------------------------
      - name: üì¶ Create Application ZIP
        run: |
          echo ">>> Creating ZIP archive for AstraVault AI..."
          mkdir -p dist
          zip -r dist/AstraVaultAI_${{ github.ref_name }}.zip . -x "*.git*" "__pycache__/*" ".github/*" "*.venv*" "*.pytest_cache*" "*.idea*" "*.vscode*"
          echo "‚úÖ ZIP archive created successfully."

      # ---------------------------------------------------------
      # 4Ô∏è‚É£ Publish GitHub Release
      # ---------------------------------------------------------
      - name: üöÄ Publish to GitHub Releases
        uses: softprops/action-gh-release@v2
        with:
          files: dist/*.zip
          generate_release_notes: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ---------------------------------------------------------
      # 5Ô∏è‚É£ Completion Summary
      # ---------------------------------------------------------
      - name: ‚úÖ Release Completed
        run: |
          echo "============================================================"
          echo "‚úÖ AstraVault AI ‚Äì ZIP Release published successfully"
          echo "üì¶ Package: dist/AstraVaultAI_${{ github.ref_name }}.zip"
          echo "üîí BYLICKILABS ‚Äì Intelligence Systems & Communications"
          echo "============================================================"
